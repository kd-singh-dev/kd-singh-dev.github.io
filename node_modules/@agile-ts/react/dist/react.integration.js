"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@agile-ts/core");
const react_1 = __importDefault(require("react"));
const reactIntegration = new core_1.Integration({
    key: 'react',
    frameworkInstance: react_1.default,
    bind() {
        return Promise.resolve(true);
    },
    updateMethod(componentInstance, updatedData) {
        if (Object.keys(updatedData).length !== 0) {
            componentInstance.agileProps = core_1.flatMerge(componentInstance.agileProps, updatedData);
            componentInstance.setState(core_1.flatMerge(componentInstance.state, updatedData));
        }
        else {
            componentInstance.forceUpdate();
        }
    },
});
core_1.Agile.initialIntegrations.push(reactIntegration);
exports.default = reactIntegration;
